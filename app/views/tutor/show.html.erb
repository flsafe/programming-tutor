<% content_for(:head) do%>
	<%= javascript_include_tag 'prototype' %>
<% end %>
<%= stylesheet 'exercise_problem_text' %>
<% title 'Blueberry Tree - You can do it!' %>
<div id="content">
	
	<div id="exercise_problem_text" class="">
		<h3><%= @exercise.title %></h3>	
		<%=@exercise.problem%>
		<div id="hints"></div>
		<%= render :partial=>'hint', :collection=>@exercise.hints %>
	</div>

	<div id="right_content">
		Time Remaining: <span id="timer">retrieving time...</span><br/>
		<%= periodically_call_remote :update=>:timer,
					:frequency=>2,
		 			:url=>{:action=>:get_time_remaining, :id=>@exercise},
					:condition=>"!(/00:00/.test($('timer').innerHTML))",
					:complete=>"if(/00:00/.test($('timer').innerHTML)){window.location.href = '#{url_for :action=>:did_not_finish}'}"%>

		<% templates = @exercise.solution_templates.written_in('c')
		   prototype = templates.first.prototype if templates.first %>
		<%= render :partial => 'text_editor', :locals=>{:editor_content=>prototype} %>

		<span id="message"></span> <%= image_tag 'spinner.gif', :id=>'spinner', :style=>"display:none;" %>
	</div> <!-- end right content -->
	
	<div id="footer">
        <p>Copyright &copy; CozySystems LLC</p>
   </div>
</div> <!-- end content -->