<script type='text/javascript' charset='utf-8'>

	function update_time() {
	  now     = new Date();
	  kickoff = Date.parse("<%= @target_end_time.to_s %>");
	  diff    = kickoff - now;

	  mins    = Math.floor( diff / (1000*60) );
	  secs    = Math.floor( diff / 1000 );
	  secs    = secs % 60;

		if(secs < 0){
			window.location.href = '<%= url_for :action=>:did_not_finish %>';
		}
		else{
	  	document.getElementById("timer")
				.innerHTML = mins + ':' + secs ;
		}
	}

	setInterval('update_time()', 1000 );
</script>