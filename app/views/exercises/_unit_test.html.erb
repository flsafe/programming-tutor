<% new_or_existing = unit_test.new_record? ? 'new' : 'existing' %>
<% prefix = "exercise[#{new_or_existing}_unit_test_attributes][]" %>

<div class="unit_test">
<% fields_for prefix, unit_test do |f|%>
	<% if unit_test.new_record? then %>
		<%= f.label "unit_test_file", "Upload Unit Test" %><br/>
		<%=  f.file_field "unit_test_file"%> <%= link_to_function 'Remove', "this.up('.unit_test').remove()" %>
	<% else %>
		<%= f.label :src_language %> 	 <%= link_to_function 'Remove', "this.up('.unit_test').remove()" %><br/>
		<%= f.text_field :src_language%><br/>
	
		<%= f.label :src_code %><br/>
		<%= f.text_area :src_code %><br/>
	<% end %>
<% end %>
</div>